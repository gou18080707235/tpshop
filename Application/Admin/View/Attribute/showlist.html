<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>无标题文档</title>
    <style type="text/css">
        <!--
        body {
            margin-left: 3px;
            margin-top: 0px;
            margin-right: 3px;
            margin-bottom: 0px;
        }
        .STYLE1 {
            color: #e1e2e3;
            font-size: 12px;
        }
        .STYLE6 {color: #000000; font-size: 12px; }
        .STYLE10 {color: #000000; font-size: 12px; }
        .STYLE19 {
            color: #344b50;
            font-size: 12px;
        }
        .STYLE21 {
            font-size: 12px;
            color: #3b6375;
        }
        .STYLE22 {
            font-size: 12px;
            color: #295568;
        }
        a:link{
            color:#e1e2e3; text-decoration:none;
        }
        a:visited{
            color:#e1e2e3; text-decoration:none;
        }
        -->
    </style>
</head>
<script src="{:C('AD_JS_URL')}jquery-1.8.3.js"></script>
<body>
<table width="100%" border="0" align="center" cellpadding="0" cellspacing="0">
    <tr>
        <td height="30"><table width="100%" border="0" cellspacing="0" cellpadding="0">
            <tr>
                <td height="24" bgcolor="#353c44"><table width="100%" border="0" cellspacing="0" cellpadding="0">
                    <tr>
                        <td><table width="100%" border="0" cellspacing="0" cellpadding="0">
                            <tr>
                                <td width="6%" height="19" valign="bottom"><div align="center"><img src="{:C('AD_IMG_URL')}tb.gif" width="14" height="14" /></div></td>
                                <td width="94%" valign="bottom"><span class="STYLE1"> 权限管理 -> 权限列表</span></td>
                            </tr>
                        </table></td>
                        <td><div align="right"><span class="STYLE1">
              <a href="{:U('tianjia')}"><img src="{:C('AD_IMG_URL')}add.gif" width="10" height="10" /> 添加</a>   &nbsp;
              </span>
                            <span class="STYLE1"> &nbsp;</span></div></td>
                    </tr>
                </table></td>
            </tr>
        </table></td>
    </tr>
    <tr>
        <td width="4%" height="20" bgcolor="d3eaef" class="STYLE10">
            按商品类型显示：
            <select name="" id="type_id" onchange="show_attr_info()">
                <option value="0">请选择</option>
                <foreach name="typeInfo" item="v">
                    <option value="{$v['type_id']}">{$v['type_name']}</option>
                </foreach>
            </select>
        </td>
    </tr>
    <tr>
        <td><table width="100%" border="0" cellpadding="0" cellspacing="1" bgcolor="#a8c7ce" id="show_attr">
            <tr>
                <td width="5%" height="20" bgcolor="d3eaef" class="STYLE6"><div align="center"><span class="STYLE10">属性ID</span></div></td>
                <td width="10%" height="20" bgcolor="d3eaef" class="STYLE6"><div align="center"><span class="STYLE10">名称</span></div></td>
                <td width="10%" height="20" bgcolor="d3eaef" class="STYLE6"><div align="center"><span class="STYLE10">商品类型</span></div></td>
                <td width="10%" height="20" bgcolor="d3eaef" class="STYLE6"><div align="center"><span class="STYLE10">是否可选</span></div></td>
                <td width="10%" height="20" bgcolor="d3eaef" class="STYLE6"><div align="center"><span class="STYLE10">录入方式</span></div></td>
                <td width="10%" height="20" bgcolor="d3eaef" class="STYLE6"><div align="center"><span class="STYLE10">可选值列表</span></div></td>
                <td width="10%" height="20" bgcolor="d3eaef" class="STYLE6"><div align="center"><span class="STYLE10">基本操作</span></div></td>
            </tr>
            <foreach name="info" item="v">

                <tr>

                    <td height="20" bgcolor="#FFFFFF" class="STYLE6"><div align="left"><span class="STYLE19">{$v['attr_id']}</span></div></td>
                    <td height="20" bgcolor="#FFFFFF" class="STYLE6"><div align="left"><span class="STYLE19">{$v['attr_name']}</span></div></td>
                    <td height="20" bgcolor="#FFFFFF" class="STYLE19"><div align="center">{$v['type_name']}</div></td>
                    <td height="20" bgcolor="#FFFFFF" class="STYLE19"><div align="center">{$v['attr_sel']=='only'?'唯一属性':'单选属性'}</div></td>
                    <td height="20" bgcolor="#FFFFFF" class="STYLE19"><div align="center">{$v['attr_write']=='manual'?'手工':'列表选取'}</div></td>
                    <td height="20" bgcolor="#FFFFFF" class="STYLE19"><div align="center">{$v['attr_vals']}</div></td>
                    <td height="20" bgcolor="#FFFFFF"><div align="center" class="STYLE21">
                        <a href="{:U('del',array('goods_id'=>$v['goods_id']))}" onclick="return confirm('您真的要删除这条信息吗？')" style="color: darkmagenta"><img src="{:C('AD_IMG_URL')}del.gif" width="10" height="10" /> 删除 </a>| <span style="color: darkmagenta">查看</span> |
                        <a href="{:U('upd',array('goods_id'=>$v['goods_id']))}" style="color: darkmagenta"><img src="{:C('AD_IMG_URL')}edit.gif" width="10" height="10"  /> 编辑</a></div></td>
                </tr>
            </foreach>
        </table></td>
    </tr>
    <tr>
        <td height="30"><table width="100%" border="0" cellspacing="0" cellpadding="0">
            <tr>
                <td width="33%"><div align="left"><span class="STYLE22">&nbsp;&nbsp;&nbsp;&nbsp;共有<strong> 243</strong> 条记录，当前第<strong> 1</strong> 页，共 <strong>10</strong> 页</span></div></td>
                <td width="67%"><table width="312" border="0" align="right" cellpadding="0" cellspacing="0">
                    <tr>
                        <td width="49"><div align="center"><img src="{:C('AD_IMG_URL')}main_54.gif" width="40" height="15" /></div></td>
                        <td width="49"><div align="center"><img src="{:C('AD_IMG_URL')}main_56.gif" width="45" height="15" /></div></td>
                        <td width="49"><div align="center"><img src="{:C('AD_IMG_URL')}main_58.gif" width="45" height="15" /></div></td>
                        <td width="49"><div align="center"><img src="{:C('AD_IMG_URL')}main_60.gif" width="40" height="15" /></div></td>
                        <td width="37" class="STYLE22"><div align="center">转到</div></td>
                        <td width="22"><div align="center">
                            <input type="text" name="textfield" id="textfield"  style="width:20px; height:12px; font-size:12px; border:solid 1px #7aaebd;"/>
                        </div></td>
                        <td width="22" class="STYLE22"><div align="center">页</div></td>
                        <td width="35"><img src="{:C('AD_IMG_URL')}main_62.gif" width="26" height="15" /></td>
                    </tr>
                </table></td>
            </tr>
            <tr>
                <td>
                    <input type="hidden" id="chuan_type_id" value="{$Think.get.type_id}">
                    <script>
                        $(function(){

                            var chuan_type_id=$('#chuan_type_id').val();
                            $('#type_id').val([chuan_type_id]);
                            show_attr_info();

                        });
                    </script>
                </td>
            </tr>
        </table></td>
    </tr>
</table>
</body>
<script>
    function show_attr_info(){
        var attr_info_cache=new Array();
        var type_id=$('#type_id').val();
        //alert(type_id);
        if(typeof attr_info_cache[type_id]==='undefined'){
            $.ajax({
                url:'__CONTROLLER__/getAttrInfoByType',
                data:{'type_id':type_id},
                type:'get',
                dataType:'json',
                async:false,
                success:function(msg){
                    //console.log(msg);
                    var s = "";
                    $.each(msg,function(n,v){
                        s += '<tr><td height="20" bgcolor="#FFFFFF" class="STYLE6"><div align="center"><span class="STYLE19">';
                        s += v.attr_id;
                        s += '</span></div></td> <td height="20" bgcolor="#FFFFFF" class="STYLE19"><div align="center">';
                        s += v.attr_name;
                        s += '</div></td> <td height="20" bgcolor="#FFFFFF" class="STYLE19"><div align="center">';
                        s += v.type_name;
                        s += '</div></td> <td height="20" bgcolor="#FFFFFF" class="STYLE19"><div align="center">';
                        s += v.attr_sel=='only'?'唯一属性':'单选属性';
                        s += '</div></td> <td height="20" bgcolor="#FFFFFF" class="STYLE19"><div align="center">';
                        s += v.attr_write=='manual'?'手工':'列表选取';
                        s += '</div></td> <td height="20" bgcolor="#FFFFFF" class="STYLE19"><div align="center">'
                        s += v.attr_vals;
                        s += '</div></td> <td height="20" bgcolor="#FFFFFF"><div align="center" class="STYLE21"><a href="/index.php/Admin/Attribute/delAttr/attr_id/'+v.attr_id+'.html" style="color:rgb(59,99,117)"> <img src="/Public/Admin/images/del.gif" width="10" height="10" /> 删除 </a>| 查看 | <a href="/index.php/Admin/Attribute/updAttr/attr_id/'+v.attr_id+'.html" style="color:rgb(59,99,117)"><img src="/Public/Admin/images/edit.gif" width="10" height="10" /> 编辑</a> </div></td> </tr>';
                    });
                    attr_info_cache[type_id]=s;
                    //console.log(attr_info_cache[type_id]);
                }
            });
        }
        $('#show_attr tr:gt(0)').remove();
        $('#show_attr').append(attr_info_cache[type_id]);
    }
</script>
</html>
